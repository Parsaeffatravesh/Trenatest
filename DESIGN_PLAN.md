# طرح اولیه طراحی رابط کاربری پنل معاملاتی

این سند یک نقشه راه عملی برای شروع طراحی UI/UX پنل معاملاتی است. هر بخش شامل هدف، خروچی مورد انتظار و معیار تکمیل است تا تیم بتواند با سرعت و کیفیت بالا پیش برود.

## 1. اهداف و اصول راهنما
- **هدف اصلی**: رابطی سریع، شفاف و امن برای معاملات و پایش بازار.
- **اصول**: سادگی و تمرکز بر داده‌های کلیدی، واکنش‌پذیری لحظه‌ای، دسترس‌پذیری (WCAG 2.1 AA)، تم دوگانه تیره/روشن، و قابلیت شخصی‌سازی چیدمان.
- **شاخص‌های موفقیت**: زیر ۲ ثانیه TTI در دسکتاپ، >90 امتیاز Lighthouse (Performance/Best Practices/Accessibility)، بدون خطای قابل مشاهده در رندر داده‌های زنده در ۳۰ دقیقه تست فشار.

## 2. تعریف پرسونا و سناریوهای هسته
- **پرسوناهای پایه**: تریدر روزانه (دسکتاپ، سرعت بالا)، سرمایه‌گذار میان‌مدت (موبایل/تبلت، مشاهده سبد)، ادمین پشتیبانی (وب، مانیتورینگ سفارش‌ها).
- **سناریوهای کلیدی**: جست‌وجوی نماد و افزودن به دیده‌بان، مشاهده نمودار و عمق بازار، ثبت سفارش بازار/لیمیت/استاپ، بررسی پرتفوی و P&L، دریافت هشدار قیمتی، سوییچ Lite/Pro.
- **خروجی**: فلوهای کاربری رسم‌شده (Diagram) برای هر سناریو با نقاط تماس و حالت‌های خطا.

## 3. معماری اطلاعات و ناوبری
- **ساختار صفحات**: داشبورد، بازارها (لیست نماد + فیلترها)، صفحه نماد (نمودار، اوردربوک، تریدتیکت)، سفارشات/تاریخچه، پرتفوی، تنظیمات/ترجیحات.
- **الگوی ناوبری**: نوار بالا یا سایدبار در دسکتاپ، تب پایین در موبایل؛ Breadcrumb برای صفحات داخلی نماد.
- **خروجی**: نقشه سایت و جدول دسترسی ۲-کلیکی به هسته‌ها، تصمیم ریسپانسیو برای هر سکشن (Stack/Tab/Drawer).

## 4. وایرفریم‌ها و لایه‌بندی
- **Low-fi وایرفریم** برای دسکتاپ و موبایل با تمرکز بر: هدر وضعیت اتصال، پانل نمودار (70/30 تقسیم با اوردربوک در دسکتاپ)، تریدتیکت شناور/چسبان، نوتیفیکیشن‌های Toast.
- **حالت‌های داده**: لودینگ (Skeleton)، Empty state، Error state با CTA اصلاحی.
- **الگوی جدول**: قابلیت Sort، فیلتر سریع، ردیف قابل کلیک، ردیف‌های تراکم بالا در Pro.
- **خروجی**: فایل‌های وایرفریم (Figma/Whimsical) با Annotated notes برای تعامل‌ها.

## 5. سیستم طراحی و توکن‌ها
- **رنگ‌ها**: پالت محدود ۳-۴ رنگ برند + سبز/قرمز وضعیت؛ نسخه‌های هماهنگ برای تم تیره/روشن؛ حداقل کنتراست 4.5:1.
- **تایپوگرافی**: فونت فارسی خوانا + ارقام Tabular؛ سلسله‌مراتب H1–H6، Body، Caption، Tag.
- **Spacing & Grid**: مقیاس 8pt، کانتینر 12-ستونه در دسکتاپ، 4-ستونه در موبایل؛ گایدلاین آیکون‌سایز و Radius.
- **خروجی**: صفحه توکن‌ها در Figma + فایل CSS Variables پیشنهادی.

## 6. کامپوننت‌ها و الگوهای تعامل
- **کامپوننت پایه**: Button (حالت‌های Primary/Secondary/Danger/Inline)، Input/Select، Checkbox/Toggle، Tooltip، Modal/Drawer، Tabs، Pagination، Toast/Inline Alert.
- **دامنه معاملاتی**: Ticker Header، Watchlist Card با Sparkline، Order Book با Virtualization، Trade Ticket (Market/Limit/Stop + Validations)، Positions/P&L widget، Notifications Panel.
- **تعاملات پیشرفته**: Drag & drop ویجت‌ها، Resize پنل‌ها، Hotkeys (B خرید، S فروش، / جست‌وجو)، به‌روزرسانی نرم قیمت‌ها با Highlight لحظه‌ای.
- **خروجی**: مستند رفتار حالت‌ها (Hover/Active/Disabled/Loading)، Variantهای تم، و API کامپوننت (Props, Slots, Error/Loading states).

## 7. نمودار و بصری‌سازی داده
- **الگوی پیش‌فرض**: نمودار کندل + حجم، اندیکاتورهای قابل افزودن (MA/RSI)، مارکر سفارش روی چارت.
- **عملکرد**: Virtualization/Windowing داده، کاهش نرخ رندر با Throttle ~10fps، استفاده از Canvas/WebGL در نماهای شلوغ.
- **حالت‌ها**: خطای فید، قطع اتصال WebSocket (بنر هشدار + دکمه Reconnect)، حالت Market Closed.
- **خروجی**: مشخصات تعامل (Zoom/Pan، Crosshair، Context menu سفارش)، گایدلاین سبک لایه‌ها (رنگ کندل، Gridlines، Tooltip).

## 8. جریان‌های اعتبارسنجی و امنیت UX
- **فرم سفارش**: ولیدیشن همزمان مقدار/حداکثر موجودی، نمایش کارمزد و مقدار نهایی، تایید دو مرحله‌ای برای سفارش‌های حساس.
- **حفاظت UI**: Banner هشدار SSL/WSS قطع، جلوگیری از دوبار کلیک، نوتیف خطا با پیام انسانی.
- **خروجی**: جدول پیام‌های خطا/هشدار استاندارد، Flow تایید دو مرحله‌ای و Recovery در موبایل.

## 9. دسترس‌پذیری و بین‌المللی‌سازی
- **A11y**: فوکوس‌استیت واضح، ترتیب Tab منطقی، ARIA برای جداول/چارت (توضیح خلاصه عددی)، پشتیبانی کیبورد در مودال و منوها.
- **i18n**: راست‌به‌چپ/چپ‌به‌راست، قالب اعداد/تاریخ، تفکیک فونت برای لاتین/فارسی، واحدهای پولی و اعشاری متفاوت.
- **خروجی**: چک‌لیست WCAG، سناریوهای RTL و نمونه متن چندزبانه.

## 10. برنامه تست تجربه کاربری
- **تست روی دستگاه واقعی**: موبایل (iOS/Android)، دسکتاپ 1080p و اولتراواید؛ سناریو شبکه ضعیف و قطع/وصل WebSocket.
- **قابلیت سنجش**: زمان انجام سناریوهای اصلی، نرخ خطا در تکمیل سفارش، رضایت کاربران آزمایشی.
- **خروجی**: اسکریپت تست وظیفه‌محور + شاخص‌های کمی (SUS/NPS مختصر).

## 11. نقشه تحویل و اولویت‌بندی
- **هفته 1**: پرسونا، سناریو، معماری اطلاعات، وایرفریم Low-fi دسکتاپ/موبایل.
- **هفته 2**: سیستم طراحی پایه (توکن‌ها، تایپوگرافی، کامپوننت‌های عمومی) + الگوهای تریدتیکت و اوردربوک.
- **هفته 3**: وایرفریم High-fi چارت/پرتفوی، تعاملات پیشرفته (Drag/Resize/Hotkeys)، حالت‌های خطا/قطع اتصال.
- **هفته 4**: فاینالیز تم تیره/روشن، اسناد A11y/i18n، بسته تحویل Storybook/Design Tokens.

## چک‌لیست تحویل اولیه
- [ ] فلوهای کلیدی مستند و تایید شده با ذی‌نفعان
- [ ] وایرفریم‌های Annotated (دسکتاپ/موبایل)
- [ ] پالت و تایپوگرافی نهایی + CSS Variables پیشنهادی
- [ ] کیت کامپوننت با حالت‌ها و API
- [ ] گایدلاین نمودار و تعاملات ترید
- [ ] چک‌لیست A11y و سناریوهای RTL
- [ ] برنامه تست UX و معیارهای سنجش

این برنامه با تمرکز بر خروجی‌های ملموس (وایرفریم، توکن، کیت کامپوننت) امکان شروع فوری توسعه فرانت‌اند را فراهم می‌کند و ریسک‌های عملکردی، امنیتی و دسترس‌پذیری را از ابتدا پوشش می‌دهد.
