# تسک‌های بعدی (پیشرفته) برای طراحی و آماده‌سازی توسعه فرانت‌اند پنل معاملاتی

این سند، گام‌های عملی و پیشرفته پس از طرح اولیه را مشخص می‌کند تا خروجی‌های طراحی به سرعت به توسعه قابل تحویل تبدیل شوند. هر تسک شامل خروجی ملموس، معیار پذیرش و ابزارهای پیشنهادی است.

## 1) نهایی‌سازی پرسونا و فلوهای کلیدی
- **خروجی**: مستند پرسونا (3 نقش) + Journey Map مختصر برای هر سناریو اصلی (جست‌وجوی نماد، ثبت سفارش، بررسی پرتفوی، دریافت هشدار).
- **معیار پذیرش**: برای هر فلو، حالت‌های خطا/ارتباط قطع و نسخه موبایل/دسکتاپ پوشش داده شده باشد.
- **ابزار**: FigJam/Whimsical برای دیاگرام، Sheets برای KPIها.

## 2) وایرفریم High-Fidelity (دسکتاپ و موبایل)
- **خروجی**: وایرفریم Annotated در Figma شامل:
  - هدر وضعیت اتصال + بنر WebSocket قطع/وصل.
  - تریدتیکت چسبان با حالت‌های Market/Limit/Stop و خطاهای ولیدیشن.
  - اوردربوک مجازی‌سازی‌شده (Virtualized) + عمق بازار فشرده در موبایل.
  - چارت کندل + حجم + اندیکاتور (MA/RSI) با Crosshair و Zoom.
  - لیست دیده‌بان با اسپارک‌لاین، فیلتر سریع، و Batch actions (افزودن/حذف).
- **معیار پذیرش**: هر صفحه دارای Skeleton/Empty/Error State و CTA اصلاحی باشد؛ نسخه RTL بررسی شده؛ دستورالعمل ریسپانسیو (Stack/Tab/Drawer) مشخص باشد.

## 3) توکن‌های طراحی و گایدلاین تم دوگانه
- **خروجی**: 
  - فایل CSS Variables پیشنهادی (`tokens.css`) با رنگ، تایپو، فاصله، Radius، Shadow، Transition.
  - جدول Mapping برای تم Dark/Light (با مقادیر کنتراست ≥4.5:1 برای متن‌های اصلی).
  - فونت: فارسی خوانا + ارقام Tabular؛ Pair لاتین/فارسی هماهنگ.
- **معیار پذیرش**: مستند تست کنتراست (اسکرین‌کپ از ابزار A11y)، و سناریوی تعویض تم بدون FOUC (Flash of Unstyled Content).

## 4) کیت کامپوننت و API رفتاری
- **خروجی**: مستند Figma + جدول API برای هر کامپوننت کلیدی:
  - Button/Link (حالت Loading/Disabled/Prefix Icon)، Input/Select/Combobox، Tooltip/Popover، Modal/Drawer، Tabs، Pagination.
  - دامنه معاملاتی: Order Ticket، Order Book، Positions/P&L، Watchlist Card، Notifications/Toasts.
- **معیار پذیرش**: برای هر کامپوننت، Props/States/Keyboard Interactions و نمونه RTL ذکر شده باشد؛ خطوط راهنمای خطا (Human-readable) و نرخ Throttle برای داده‌های زنده تعریف شده باشد.

## 5) چارت و داده‌های زنده
- **خروجی**: Specification تعاملات چارت (Zoom/Pan، Crosshair، Context Menu سفارش، Drag برای ویرایش سفارش) + گایدلاین سبک (کندل/خط/اندیکاتور).
- **معیار پذیرش**: 
  - سیاست کاهش نرخ رندر (مثلاً 10fps) و Strategy Windowing داده.
  - حالت قطع اتصال WebSocket با بنر و دکمه Reconnect، و fallback polling.
  - تست پرفورمنس هدف: حفظ FPS ≥ 50 در سناریوی 5k نقطه داده.

## 6) جریان‌های ولیدیشن و امنیت UX
- **خروجی**: فلو تایید دو مرحله‌ای سفارش حساس، جدول پیام خطای استاندارد، الگوی جلوگیری از Double-submit، و نمایش کارمزد/مجموع نهایی در لحظه.
- **معیار پذیرش**: همه پیام‌ها بومی‌سازی‌پذیر باشند، و مسیر خطای شبکه/Timeout مشخص باشد (Retry + حالت Queue اگر لازم است).

## 7) دسترس‌پذیری و i18n
- **خروجی**: چک‌لیست WCAG 2.1 AA مخصوص این محصول + سناریوهای RTL، ترتیب Tab و Hotkeyها؛ متن نمونه چندزبانه (fa/en) با تفاوت طول رشته‌ها.
- **معیار پذیرش**: شبیه‌سازی رنگ‌گریزی (Color-blind Safe Palette) و تست کیبورد در Modal/Menu/Combobox مستند شده باشد.

## 8) برنامه تست کاربردپذیری و بنچمارک
- **خروجی**: اسکریپت تست وظیفه‌محور (5 سناریوی حیاتی) + متریک‌های هدف (زمان تکمیل، نرخ خطا، رضایت SUS/NPS کوتاه).
- **معیار پذیرش**: نتایج تست روی حداقل 5 کاربر آزمایشی (ترجیحاً 2 تریدر حرفه‌ای) و خلاصه بینش‌ها؛ اقدام اصلاحی برای هر مشکل بحرانی.

## 9) همگام‌سازی با توسعه و هندآف
- **خروجی**: صفحه Storybook پایه (یا لینک Embed) با کامپوننت‌های اصلی و Theme Switch؛ لیست Tickets برای توسعه (Jira/Linear) با لینک به فریم‌ها و Specs.
- **معیار پذیرش**: همه منابع در یک مکان مرجع (Design Ops Page) لینک شوند؛ Checklists هندآف (Assets، فاصله‌ها، Breakpoints، i18n) تکمیل شده باشد.

## 10) مسیر زمانی پیشنهادی (پس از طرح اولیه)
- هفته 1: نهایی‌سازی پرسونا/فلو + وایرفریم Hi-Fi موبایل/دسکتاپ.
- هفته 2: توکن‌ها و تم دوگانه + کیت کامپوننت پایه + ولیدیشن/امنیت UX.
- هفته 3: چارت و تعاملات داده زنده + تست کاربردپذیری اولیه + تکمیل A11y/i18n.
- هفته 4: Storybook/Design Ops، بنچمارک عملکرد، هندآف کامل به توسعه.

## 11) چک‌لیست پذیرش این فاز
- [x] وایرفریم‌های Annotated (RTL/Responsive) برای صفحات کلیدی — مستند در `PHASE2_DELIVERABLE.md`
- [x] توکن‌های طراحی + CSS Variables پیشنهادی با تست کنتراست — مستند در `src/theme/tokens.css` و `PHASE2_DELIVERABLE.md`
- [x] کیت کامپوننت با API، حالت‌ها و تعاملات کیبورد — جدول 2.1 و 2.2 در `PHASE2_DELIVERABLE.md`
- [x] گایدلاین چارت + سیاست بهینه‌سازی داده زنده و قطع اتصال — بخش 3 `PHASE2_DELIVERABLE.md`
- [x] فلوهای ولیدیشن/امنیت (2FA، Double-submit، خطاهای شبکه) — بخش 4 `PHASE2_DELIVERABLE.md`
- [x] چک‌لیست WCAG و سناریوهای RTL با نمونه متن چندزبانه — بخش 5 `PHASE2_DELIVERABLE.md`
- [x] برنامه تست کاربردپذیری و نتایج اولیه + اقدام‌های اصلاحی — بخش 6 `PHASE2_DELIVERABLE.md`
- [x] صفحه Design Ops/Storybook و بلیت‌های توسعه پیوند شده — بخش 7 `PHASE2_DELIVERABLE.md`

این تسک‌ها، خروجی‌های طراحی را به سطحی می‌رساند که توسعه می‌تواند مستقیماً آغاز شود و ریسک‌های عملکرد، امنیت و دسترس‌پذیری از پیش پوشش داده شده باشند.
